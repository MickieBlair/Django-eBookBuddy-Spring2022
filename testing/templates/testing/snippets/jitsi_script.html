<!-- <script src='https://meeting.sessions-ebookbuddy.org/external_api.js'></script> -->

<!-- <script src='https://semester.sessions-ebookbuddy.org/external_api.js'></script> -->

<!-- <script src='https://yh.mickie-blair-photography.com/external_api.js'></script> -->
<!-- <script src='https://reading.goebookbuddy.org/external_api.js'></script> -->

<script src='https://sessions.goebookbuddy.org/external_api.js'></script>


<script type="text/javascript">
	const token = JSON.parse(document.getElementById('token').textContent);
	console.log("Token", token)

	const role = JSON.parse(document.getElementById('role').textContent);
	console.log("Role", role)

	const room_name_meeting = JSON.parse(document.getElementById('room_name').textContent);
	console.log("room_name_meeting", room_name_meeting)


	// const domain = "semester.sessions-ebookbuddy.org";
	// const domain = "semester.sessions-ebookbuddy.org";
	// const domain = "yh.mickie-blair-photography.com";
	// const domain = "reading.goebookbuddy.org";
	const domain = "sessions.goebookbuddy.org";
	console.log("Domain", domain)


	// buttons =[ 'microphone', 'camera', 'closedcaptions', 'desktop', 'embedmeeting', 'fullscreen', 'fodeviceselection', 'profile', 'recording',    'livestreaming', 'etherpad', 'sharedvideo', 'shareaudio', 'settings', 'raisehand', 'videoquality', 'filmstrip', 'invite', 'feedback', 'stats', 'shortcuts','tileview', 'select-background', 'download', 'help', 'mute-everyone', 'mute-video-everyone', 'security', 'localrecording' ]

	// localRecording: {
	//              enabled: true,
	//          },

	let buttons = ""
	let localRecoding_enabled = false;
	let fileRecordingsServiceEnabled = false;
	let fileRecordingsEnabled =false;

	if(role == "Staff"){
	  localRecoding_enabled = true;
	  fileRecordingsServiceEnabled = true;
	  fileRecordingsEnabled: true;

	 buttons = [
	       'microphone', 'camera', 'closedcaptions', 'desktop', 'fodeviceselection', 'recording', 'raisehand','videoquality', 'filmstrip', 'invite', 'stats',
	       'tileview',  'mute-everyone', 'mute-video-everyone', 
	    ]
	} else{
	  buttons =[
	       'microphone', 'camera', 'fodeviceselection', 'raisehand',
	       'videoquality', 'filmstrip', 'tileview', 'desktop', 
	    ]
	}
// toolbarButtons: [ 'chat', 'microphone', 'camera', 'closedcaptions', 'desktop', 'embedmeeting', 'fullscreen', 'fodeviceselection', 'profile', 'recording',    'livestreaming', 'etherpad', 'sharedvideo', 'shareaudio', 'settings', 'raisehand', 'videoquality', 'filmstrip', 'invite', 'feedback', 'stats', 'shortcuts','tileview', 'select-background', 'download', 'help', 'mute-everyone', 'mute-video-everyone', 'security', 'localrecording' ],

	var options = {
	  roomName: room_name_meeting.replaceAll("_"," "),
	  jwt: token,
	  width: "100%",
	  height: "100%",
	  parentNode: document.querySelector('#react'),
	  configOverwrite: {
	  	toolbarButtons: [ 'chat', 'microphone', 'camera', 'closedcaptions', 'desktop', 'embedmeeting', 'fullscreen', 'fodeviceselection', 'profile', 'recording',    'livestreaming', 'etherpad', 'sharedvideo', 'shareaudio', 'settings', 'raisehand', 'videoquality', 'filmstrip', 'invite', 'feedback', 'stats', 'shortcuts','tileview', 'select-background', 'download', 'help', 'mute-everyone', 'mute-video-everyone', 'security', 'localrecording' ],
	        
	        localRecording: {
	             enabled: localRecoding_enabled,
	         },
	        fileRecordingsServiceEnabled: fileRecordingsServiceEnabled,
	        fileRecordingsEnabled: fileRecordingsEnabled,
	        startWithAudioMuted: true,
					startWithVideoMuted: true,
	  },
	  interfaceConfigOverwrite: {
	    filmStripOnly: true
	  }
	}
	console.error("Options", options)
	var api = new JitsiMeetExternalAPI(domain, options);


// setInterval(get_room_participants, 5000); 



// get_room_participants();


	
</script>